/**
 * videojs-playlist
 * @version 4.0.2
 * @copyright 2017 Brightcove, Inc.
 * @license Apache-2.0
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("video.js")):"function"==typeof define&&define.amd?define(["video.js"],t):e.videojsPlaylist=t(e.videojs)}(this,function(e){"use strict";e=e&&e.hasOwnProperty("default")?e["default"]:e;var t,n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},r=t="undefined"!=typeof window?window:void 0!==n?n:"undefined"!=typeof self?self:{},o=function(e){e.playlist.autoadvance_.timeout&&r.clearTimeout(e.playlist.autoadvance_.timeout),e.playlist.autoadvance_.trigger&&e.off("ended",e.playlist.autoadvance_.trigger),e.playlist.autoadvance_.timeout=null,e.playlist.autoadvance_.trigger=null},i=function(e,t){o(e),function(e){return"number"==typeof e&&!isNaN(e)&&e>=0&&e<Infinity}(t)&&(e.playlist.autoadvance_.trigger=function(){e.playlist.autoadvance_.timeout=r.setTimeout(function(){o(e),e.playlist.next()},1e3*t)},e.one("ended",e.playlist.autoadvance_.trigger))},u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=(function(){function e(e){this.value=e}function t(t){function n(o,i){try{var u=t[o](i),a=u.value;a instanceof e?Promise.resolve(a.value).then(function(e){n("next",e)},function(e){n("throw",e)}):r(u.done?"return":"normal",u.value)}catch(c){r("throw",c)}}function r(e,t){switch(e){case"return":o.resolve({value:t,done:!0});break;case"throw":o.reject(t);break;default:o.resolve({value:t,done:!1})}(o=o.next)?n(o.key,o.arg):i=null}var o,i;this._invoke=function(e,t){return new Promise(function(r,u){var a={key:e,arg:t,resolve:r,reject:u,next:null};i?i=i.next=a:(o=i=a,n(e,t))})},"function"!=typeof t["return"]&&(this["return"]=undefined)}"function"==typeof Symbol&&Symbol.asyncIterator&&(t.prototype[Symbol.asyncIterator]=function(){return this}),t.prototype.next=function(e){return this._invoke("next",e)},t.prototype["throw"]=function(e){return this._invoke("throw",e)},t.prototype["return"]=function(e){return this._invoke("return",e)}}(),function(e,t){for(var n=0;n<e.length;n++){var r=e[n].sources;if(Array.isArray(r))for(var o=0;o<r.length;o++){var i=r[o];if(i&&function(e,t){var n=e,r=t;return"object"===(void 0===e?"undefined":u(e))&&(n=e.src),"object"===(void 0===t?"undefined":u(t))&&(r=t.src),/^\/\//.test(n)&&(r=r.slice(r.indexOf("//"))),/^\/\//.test(r)&&(n=n.slice(n.indexOf("//"))),n===r}(i,t))return n}}return-1}),c=function(t,n){!function(t,n){var u=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0,c=Array.isArray(n)?n.slice():[],f=t.playlist=function(e){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;return Array.isArray(e)&&(c=e.slice(),-1!==n&&f.currentItem(n),f.changeTimeout_=r.setTimeout(function(){t.trigger("playlistchange")},0)),c.slice()};t.on("loadstart",function(){-1===f.currentItem()&&o(t)}),t.on("dispose",function(){r.clearTimeout(f.changeTimeout_)}),function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}(f,{currentIndex_:-1,player_:t,autoadvance_:{},repeat_:!1,currentItem:function(e){return"number"==typeof e&&f.currentIndex_!==e&&e>=0&&e<c.length?(f.currentIndex_=e,function(e,t,n){var r=!e.paused()||e.ended();e.trigger("beforeplaylistitem",n),e.poster(n.poster||""),e.src(n.sources),function(e){for(var t=e.remoteTextTracks(),n=t&&t.length||0;n--;)e.removeRemoteTextTrack(t[n])}(e),e.ready(function(){(n.textTracks||[]).forEach(e.addRemoteTextTrack.bind(e)),e.trigger("playlistitem",n),r&&e.play(),i(e,t)})}(f.player_,f.autoadvance_.delay,c[f.currentIndex_])):f.currentIndex_=f.indexOf(f.player_.currentSrc()||""),f.currentIndex_},contains:function(e){return-1!==f.indexOf(e)},indexOf:function(e){if("string"==typeof e)return a(c,e);for(var t=Array.isArray(e)?e:e.sources,n=0;n<t.length;n++){var r=t[n];if("string"==typeof r)return a(c,r);if(r.src)return a(c,r.src)}return-1},first:function(){if(c.length)return c[f.currentItem(0)];f.currentIndex_=-1},last:function(){if(c.length)return c[f.currentItem(c.length-1)];f.currentIndex_=-1},next:function(){var e=void 0;if(f.repeat_?(e=f.currentIndex_+1)>c.length-1&&(e=0):e=Math.min(f.currentIndex_+1,c.length-1),e!==f.currentIndex_)return c[f.currentItem(e)]},previous:function(){var e=Math.max(f.currentIndex_-1,0);if(e!==f.currentIndex_)return c[f.currentItem(e)]},autoadvance:function(e){f.autoadvance_.delay=e,i(f.player_,e)},repeat:function(t){return t!==undefined&&("boolean"!=typeof t?e.log.error("Invalid value for repeat",t):f.repeat_=t),f.repeat_}}),f.currentItem(u)}(this,t,n)};return(e.registerPlugin||e.plugin)("playlist",c),c});